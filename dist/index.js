(()=>{let e=e=>{let t=window.visualViewport.width,i=Object.keys(e).filter(e=>e<t);return e[Math.max(...i=i.map(e=>Number(e)))]},t=(e,t)=>{let i=e.getBoundingClientRect(),s=t.getBoundingClientRect();return i.left>=s.left&&i.left<=s.right},i=(e,t)=>("string"==typeof e&&(e=parseInt(e,10)),t[e]),s=function(e,t){let i=[];for(let s=0;s<e.length;s++)i.push(t*s);return i},n=function(e,t,i){let s=e.scrollLeft;s=s+e.clientWidth-t;let n=i.filter(e=>e>=s);return 0==n.length?s:Math.min(...n)},r=function(e,t,i){let s=e.scrollLeft;s=s-e.clientWidth+t;let n=i.filter(e=>e<=s);return 0==n.length?0:Math.max(...n)},l=function(e,t,i){let l=t.querySelectorAll(".slider-item"),o=function(e,t,i,l){let o=t[0].clientWidth+l,d=s(t,o),a=0;switch(i){case"next":a=n(e,l,d);break;case"previous":a=r(e,l,d)}return a}(t,l,e,i);t.scrollTo({left:o,behavior:"smooth"})},o=function(e){var t,i;let s=e.sliderInner.clientWidth,n=e.getGap(),r=(t=s-e.getPreview(),(t-n*((i=e.getItemsToShow())-1))/i);return e.sliderInner.style.gap="0 "+n+"px",!function(e,t){e.forEach(e=>{e.style.flexBasis=t+"px"})}(e.elements,r),e.tempTotalWidth=r*e.elements.length+n*(e.elements.length-1),e},d=function(e,t){let i;return function(){let s=arguments;i||(e.apply(this,s),i=!0,setTimeout(()=>i=!1,t))}},a=function(e,t,...i){let s=this;"onscrollend"in window?e.addEventListener("scrollend",()=>{t.apply(s,i)}):e.addEventListener("scroll",()=>{clearTimeout(window.scrollEndTimer),window.scrollEndTimer=setTimeout(()=>{t.apply(s,i)},50)})},h={};h.init=function(e){this.slider=e,this.render(),this.addEventListeners()},h.getPageCount=function(){return Math.ceil(this.slider.elements.length/this.slider.getItemsToShow())},h.render=function(){this.slider.pagerEl.innerHTML="";let e=this.slider.getItemsToShow();if(1===e)return;let t=Array.from(this.slider.elements),i=this.getPageCount();for(let s=0;s<i;s++){let i=s*e,n=i+e,r=t.slice(i,n)[0].offsetLeft,l=function(e,t,i,s,n){t>i.length&&(t=i.length),t-=1;let r=document.createElement("button");return r.classList.add("slider-pager-item"),r.setAttribute("data-page-start",e),r.setAttribute("data-page-end",t),r.setAttribute("data-scrollto",s),r.type="button",r.innerHTML=`<span>${n+1}</span>`,r}(i,n,this.slider.elements,r,s);this.slider.pagerEl.appendChild(l)}},h.addEventListeners=function(){let e=this.slider;this.slider.pagerEl.addEventListener("click",t=>{var i,s,n;i=t.target,s=e.slider,n=e.sliderInner,i.getAttribute("data-scrollto")&&(s.querySelectorAll(".slider-pager-item").forEach(e=>{e.classList.remove("active")}),i.classList.add("active"),n.scrollTo({left:i.getAttribute("data-scrollto"),behavior:"smooth"}))})},h.setActivePagerItem=function(){let e=this.slider,s=e.slider.querySelectorAll(".slider-pager-item");(s=Array.from(s)).reverse();let n=!1;s.forEach(s=>{n=function(e,s,n,r){let l=i(e.getAttribute("data-page-end"),s);return!n&&l&&t(l,r)&&(e.classList.add("active"),n=!0),n}(s,e.elements,n,e.slider)})};var c=function(e){let t=Object.create(h);return t.init(e),t};let u={};u.init=function(e,t,i="hidden"){this.responsive=t,this.slider=e,this.sliderInner=this.slider.querySelector(".slider-inner"),this.isSliding=!1,this.elements=this.sliderInner.querySelectorAll(".slider-item"),this.buttons=this.slider.querySelector(".slider-nav"),this.prevButton=this.slider.querySelector(".slider-prev"),this.nextButton=this.slider.querySelector(".slider-next"),this.pagerEl=this.slider.querySelector(".slider-pager"),this.hiddenClass=i,this.pagerEl&&(this.pager=c(this)),this.addListeners()},u.moveToPrevious=function(){this.isSliding||(this.isSliding=!0,l("previous",this.sliderInner,this.getGap()))},u.moveToNext=function(){this.isSliding||(this.isSliding=!0,l("next",this.sliderInner,this.getGap()))},u.checkButtons=function(){!function(e,t,i){t&&(e.scrollLeft<50?t.setAttribute("disabled",!0):t.removeAttribute("disabled"));let s=e.scrollWidth-e.clientWidth;i&&(e.scrollLeft>=s-50?i.setAttribute("disabled",!0):i.removeAttribute("disabled"))}(this.sliderInner,this.prevButton,this.nextButton)},u.addListeners=function(){this.prevButton&&this.prevButton.addEventListener("click",this.moveToPrevious.bind(this)),this.nextButton&&this.nextButton.addEventListener("click",this.moveToNext.bind(this)),this._onScrollEnd(),this._keyboardNavigation(),this._loadAndResize()},u._loadAndResize=function(){let e;let t=function(...t){let i=this;return clearTimeout(e),new Promise(s=>{e=setTimeout(()=>{s(o.apply(i,t))},50)})},i=()=>{t(this).then(e=>{e.showHideButtons(),e.checkButtons(),e.pager&&(e.pager.render(),e.checkPager())}).catch(e=>{console.error(e)})};window.addEventListener("DOMContentLoaded",i),window.addEventListener("resize",i)},u._onScrollEnd=function(){let e=this,t=d(()=>{e.checkPager()},50);this.sliderInner.addEventListener("scroll",t),a(this.sliderInner,()=>{e.checkButtons(),e.isSliding=!1})},u._keyboardNavigation=function(){let e=this;this.sliderInner.addEventListener("keydown",function(t){"ArrowLeft"===t.key&&(t.preventDefault(),e.moveToPrevious()),"ArrowRight"===t.key&&(t.preventDefault(),e.moveToNext())})},u.showHideButtons=function(){void 0!=this.buttons&&(this.sliderInner.clientWidth>=this.tempTotalWidth?this.buttons.classList.add(this.hiddenClass):this.buttons.classList.remove(this.hiddenClass))},u.getGap=function(){return e(this.responsive).gutter},u.getItemsToShow=function(){return e(this.responsive).items},u.getPreview=function(){let t=e(this.responsive);return t.preview?parseInt(t.preview,10):0},u.checkPager=function(){this.pager&&(1===this.pager.getPageCount()?this.pagerEl.classList.add(this.hiddenClass):this.pagerEl.classList.remove(this.hiddenClass),this.slider.querySelectorAll(".slider-pager-item").forEach(e=>{e.classList.remove("active")}),this.pager.setActivePagerItem())};var g=function(e,t,i){let s=Object.create(u);return s.init(e,t,i),s};window.slider=function({container:e=".slider",responsive:t={0:{items:3,gutter:20},576:{items:3,gutter:20},768:{items:6,gutter:20},992:{items:6,gutter:20}},hiddenClass:i="hidden"}={}){document.querySelectorAll(e).forEach(e=>{g(e,t,i)})}})();
//# sourceMappingURL=index.js.map
